(this["webpackJsonpplugin-app"]=this["webpackJsonpplugin-app"]||[]).push([[3],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(46),i=n.n(c);n(86),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(39),o=n(21),s=n(50),l=n(38),p=n(6),f=n(23);function d(e){var t=e.children,n=Object(l.a)(e,["children"]),r=Object(p.b)().isAuthenticated;return a.a.createElement(o.b,Object.assign({},n,{render:function(e){var n=e.location;return r&&"true"!==f.a.get(f.a.CONTEXT_COOKIE_NAME)?a.a.createElement(o.a,{to:{pathname:"/new-context",state:{from:n}}}):t}}))}function v(e){var t=e.children,n=Object(l.a)(e,["children"]),r=Object(p.b)().isAuthenticated;return a.a.createElement(o.b,Object.assign({},n,{render:function(e){var n=e.location;return r?t:a.a.createElement(o.a,{to:{pathname:"/welcome",state:{from:n}}})}}))}function m(e){var t=e.children,n=Object(l.a)(e,["children"]),r=Object(p.b)().isAuthenticated;return a.a.createElement(o.b,Object.assign({},n,{render:function(e){var n=e.location;return r?a.a.createElement(o.a,{to:{pathname:"/",state:{from:n}}}):t}}))}var h=n(13),O=n(51),_=n(49),b=n(1),E=n.n(b),y=n(3),T=n(8),A=n(4),S=n(5),P=n(15),w=n(25),g=function(){function e(){Object(A.a)(this,e)}return Object(S.a)(e,null,[{key:"toPlaylist",value:function(e){var t,n=e.id,r=e.name,a=e.description,c=e.images,i=e.tracks;return{id:n,title:r,description:P.a.sliceIfNeed(a),image:{alt:r,src:null===(t=c[0])||void 0===t?void 0:t.url},musics:i.items.map((function(e){return w.a.toMusic(e.track)}))}}},{key:"toBasicPlaylist",value:function(e){var t,n=e.id,r=e.name,a=e.images,c=e.description;return{id:n,title:r,description:P.a.sliceIfNeed(c),image:{alt:r,src:null===(t=a[0])||void 0===t?void 0:t.url}}}}]),e}(),C=n(17),k=Object(r.createContext)({}),j="".concat(T.a.getApiUrl(),"/me/playlists"),I="".concat(T.a.getApiUrl(),"/playlists");function R(e){var t=Object(C.b)().profile.id,n=Object(p.b)().requestService;function r(){return(r=Object(y.a)(E.a.mark((function e(t,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post({url:"".concat(I,"/").concat(t,"/tracks"),data:{uris:r}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(y.a)(E.a.mark((function e(){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post({url:"".concat(T.a.getApiUrl(),"/users/").concat(t,"/playlists"),data:{name:"Nova playlist"}});case 2:return r=e.sent,a=r.data,e.abrupt("return",a.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(y.a)(E.a.mark((function e(){var t,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get({url:j});case 2:return t=e.sent,r=t.data,e.abrupt("return",r.items.map(g.toBasicPlaylist));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(y.a)(E.a.mark((function e(t){var r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get({url:"".concat(I,"/").concat(t)});case 2:return r=e.sent,a=r.data,e.abrupt("return",g.toPlaylist(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(y.a)(E.a.mark((function e(t,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put({url:"".concat(I,"/").concat(t),data:{name:r}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(k.Provider,Object.assign({value:{addMusics:function(e,t){return r.apply(this,arguments)},create:function(){return c.apply(this,arguments)},load:function(e){return u.apply(this,arguments)},loadAll:function(){return i.apply(this,arguments)},rename:function(e,t){return o.apply(this,arguments)}}},e))}var x=n(53);function L(e){var t=e.children;return a.a.createElement(p.a,null,a.a.createElement(C.a,null,a.a.createElement(h.b,null,a.a.createElement(R,null,a.a.createElement(_.a,null,a.a.createElement(O.a,null,a.a.createElement(x.a,null,t)))))))}var U=n(114),N=n(121),M=n(120),H=n(37),D=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6),n.e(13)]).then(n.bind(null,254))})),K=a.a.lazy((function(){return Promise.all([n.e(0),n.e(20),n.e(19)]).then(n.bind(null,239))})),V=a.a.lazy((function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,240))})),F=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,241))})),Y=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(15)]).then(n.bind(null,242))})),z=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,243))})),G=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,258))})),W=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8)]).then(n.bind(null,244))})),B=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(7)]).then(n.bind(null,245))})),q=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,259))})),Z=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(12)]).then(n.bind(null,246))})),X=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(17),n.e(16)]).then(n.bind(null,247))})),J=Object(U.a)({palette:{primary:{main:"#282828"},secondary:H.a}});J=Object(N.a)(J),i.a.render(a.a.createElement(r.StrictMode,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(s.a,null)},a.a.createElement(L,null,a.a.createElement(M.a,{theme:J},a.a.createElement(u.a,null,a.a.createElement(o.d,null,a.a.createElement(m,{path:"/login"},a.a.createElement(V,null)),a.a.createElement(m,{path:"/login-redirect-spotify"},a.a.createElement(F,null)),a.a.createElement(m,{exact:!0,path:"/:access_token(access_token=.*)"},a.a.createElement(F,null)),a.a.createElement(m,{path:"/welcome"},a.a.createElement(K,null)),a.a.createElement(v,{path:"/new-context",exact:!0},a.a.createElement(W,{key:"feeling",type:"feeling"})),a.a.createElement(v,{path:"/new-context/want-to-fell-like"},a.a.createElement(W,{key:"want-to-fell-like",type:"want-to-fell-like"})),a.a.createElement(v,{path:"/new-context/activity"},a.a.createElement(B,null)),a.a.createElement(v,{path:"/new-context/location"},a.a.createElement(q,null)),a.a.createElement(d,null,a.a.createElement(v,{path:"/recommendation"},a.a.createElement(X,null)),a.a.createElement(v,{path:"/music-search"},a.a.createElement(Z,null)),a.a.createElement(v,{path:"/gender"},a.a.createElement(G,null)),a.a.createElement(v,{path:"/artists"},a.a.createElement(z,null)),a.a.createElement(v,{path:"/logout"},a.a.createElement(Y,null)),a.a.createElement(v,{path:"/",exact:!0},a.a.createElement(D,null))))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return T}));var r,a=n(1),c=n.n(a),i=n(3),u=n(0),o=n.n(u),s=n(26),l=n(4),p=n(5),f=n(20),d=new(function(){function e(){Object(l.a)(this,e)}return Object(p.a)(e,[{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;try{(n=!!dataLayer.push(Object(s.a)({event:e},t)))&&f.a.log("There is no gtm tags for the event: ",e)}catch(r){f.a.log("There was a problem to send the gtm event ",r)}return n}}]),e}()),v=n(19),m=n(17),h=n(33);!function(e){e.CHANGE_MUSIC_TIME="CHANGE_MUSIC_TIME",e.CHANGE_TO_NEXT_MUSIC="CHANGE_TO_NEXT_MUSIC",e.CHANGE_TO_PREVIOUS_MUSIC="CHANGE_TO_PREVIOUS_MUSIC",e.CHOOSE_ACTIVITY="CHOOSE_ACTIVITY",e.CHOOSE_FEELING="CHOOSE_FEELING",e.CHOOSE_FEELING_TO_BE_LIKE="CHOOSE_FEELING_TO_BE_LIKE",e.CHOOSE_LOCATION="CHOOSE_LOCATION",e.HATED_MUSIC="HATED_MUSIC",e.HIDE_DETAILS="HIDE_DETAILS",e.LIKED_ARTIST="LIKED_ARTIST",e.LIKED_GENRE="LIKED_GENRE",e.LIKED_MUSIC="LIKED_MUSIC",e.LOAD_LOCATION="LOAD_LOCATION",e.PAUSE_MUSIC="PAUSE_MUSIC",e.PLAY_MUSIC="PLAY_MUSIC",e.RESTART_MUSIC="RESTART_MUSIC",e.SHOW_DETAILS="SHOW_DETAILS"}(r||(r={}));var O=Object({NODE_ENV:"production",PUBLIC_URL:"/computer-science-tcc",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_COOKIE_NAME:"SpotifyToken",REACT_APP_HOST_URL:"https://ericoloewe.github.io/computer-science-tcc",REACT_APP_LORS_HOST:"https://lors.azurewebsites.net",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1",REACT_APP_SPOTIFY_AUTH_URL:"https://accounts.spotify.com/authorize",REACT_APP_SPOTIFY_CLIENT_ID:"62cd1002f7cd431e92969df2d619de90",REACT_APP_SPOTIFY_CLIENT_SECRET:"2ba7386c1c7a447fb961f4de8d091009",REACT_APP_USE_GTM:"true"}).REACT_APP_API_HOST||"https://localhost:44301/api",_="".concat(O,"/UserEvents"),b=Object(u.createContext)({}),E=[];function y(e){var t=Object(m.b)().profile.uri;function n(){return(n=Object(i.a)(c.a.mark((function e(n,r){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={type:n,value:r,spotifyUserUri:t},!a(n)){e.next=9;break}0,d.sendEvent("USER_ACTION",i),e.next=8;break;case 6:return e.next=8,v.b.post({url:_,data:i});case 8:h.a.addNew("events/".concat(t),{action:n,value:r,createdDateTime:(new Date).toISOString()});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){var t=E[E.length-1];return E.push(e),!(e===t&&(e===r.PAUSE_MUSIC||e===r.PLAY_MUSIC))}return o.a.createElement(b.Provider,Object.assign({value:{save:function(e,t){return n.apply(this,arguments)}}},e))}var T=function(){return Object(u.useContext)(b)}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),c=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"isEmpty",value:function(e){return null==e||"string"===typeof e&&0===e.trim().length}},{key:"isString",value:function(e){return"string"===typeof e}},{key:"sliceIfNeed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length>t?"".concat(e.slice(0,t),"..."):e}},{key:"toKebabCase",value:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^-\w ]/g,"").replace(/-+/g," ").trim().replace(/ +/g,"-").toLowerCase()}},{key:"toString",value:function(e){if(!e)throw new Error("Invalid str");return e.toString()}},{key:"toStringOrDefault",value:function(e,t){return e?e.toString():t}}]),e}()},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m}));var r=n(1),a=n.n(r),c=n(3),i=n(10),u=n(0),o=n.n(u),s=n(6),l=n(8),p=Object(u.createContext)({}),f="".concat(l.a.getApiUrl(),"/me"),d=Object({NODE_ENV:"production",PUBLIC_URL:"/computer-science-tcc",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_COOKIE_NAME:"SpotifyToken",REACT_APP_HOST_URL:"https://ericoloewe.github.io/computer-science-tcc",REACT_APP_LORS_HOST:"https://lors.azurewebsites.net",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1",REACT_APP_SPOTIFY_AUTH_URL:"https://accounts.spotify.com/authorize",REACT_APP_SPOTIFY_CLIENT_ID:"62cd1002f7cd431e92969df2d619de90",REACT_APP_SPOTIFY_CLIENT_SECRET:"2ba7386c1c7a447fb961f4de8d091009",REACT_APP_USE_GTM:"true"}).REACT_APP_API_HOST||"https://localhost:44301/api";"".concat(d,"/user");function v(e){var t=Object(s.b)(),n=t.isAuthenticated,r=t.requestService,l=Object(u.useState)({}),d=Object(i.a)(l,2),v=d[0],m=d[1];function h(){return(h=Object(c.a)(a.a.mark((function e(){var t,n,c,i,u,o,s,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get(f);case 2:n=e.sent,c=n.data,i=c.id,u=c.email,o=c.display_name,s=c.external_urls.spotify,l=c.images,p=c.uri,d=null===(t=l[0])||void 0===t?void 0:t.url,m({id:i,email:u,name:o,link:s,avatarSrc:d,uri:p}),_({avatarSrc:d,spotifyUri:p,name:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(f,"/player/devices"),e.next=3,r.get(t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c.devices);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){n?function(){h.apply(this,arguments)}():m({})}),[n]),o.a.createElement(p.Provider,Object.assign({value:{getAvailableDevices:function(){return O.apply(this,arguments)},profile:v}},e))}var m=function(){return Object(u.useContext)(p)}},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _}));var r=n(24),a=n(79),c=n(78),i=n(80),u=n(26),o=n(1),s=n.n(o),l=n(3),p=n(4),f=n(5),d=n(36),v=n.n(d),m=n(15),h=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,[{key:"get",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseRequest(t),e.next=3,v()(n);case 3:return r=e.sent,e.abrupt("return",this.mapAxiosToResponse(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseRequest(t),e.next=3,v()(Object(u.a)({},n,{method:"post"}));case 3:return r=e.sent,e.abrupt("return",this.mapAxiosToResponse(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseRequest(t),e.next=3,v()(Object(u.a)({},n,{method:"put"}));case 3:return r=e.sent,e.abrupt("return",this.mapAxiosToResponse(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseRequest",value:function(e){var t=e;return m.a.isString(e)&&(t={url:e}),t}},{key:"mapAxiosToResponse",value:function(e){return{data:e.data,headers:e.headers,status:e.status}}}]),e}(),O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).accessToken=void 0,r.accessToken=e,r}return Object(f.a)(n,[{key:"parseRequest",value:function(e){var t=Object(a.a)(Object(r.a)(n.prototype),"parseRequest",this).call(this,e);if(null==this.accessToken)throw new Error("No access token, you must login!");return t.headers={Authorization:"Bearer ".concat(this.accessToken)},t}}]),n}(h),_=new h},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),c=n(33),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._do("log",n)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._do("warn",n)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e._do("error",n)}},{key:"_do",value:function(e,t){console[e]("[".concat(e,"]: "),t),c.a.addNew("log/".concat(e),t.filter(Boolean))}}]),e}()},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),c=new(function(){function e(){Object(r.a)(this,e),this.CONTEXT_COOKIE_NAME="FilledTheContext"}return Object(a.a)(e,[{key:"delete",value:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"get",value:function(e){var t=document.cookie,n="";if(t.includes(e)){var r=t.indexOf(e);n=t.substring(r).split(";",1)[0].split("=")[1]}return decodeURIComponent(n)}},{key:"save",value:function(e,t,n){var r="";if(n){var a=new Date;a.setTime(a.getTime()+1e3*n),r="; expires="+a.toUTCString()}document.cookie="".concat(e,"=").concat(t).concat(r,"; path=/")}}]),e}())},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(5),c=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"toCustom",value:function(e,t){var n;return{alt:e,src:null===(n=t[0])||void 0===n?void 0:n.url}}}]),e}(),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"toMusicTrack",value:function(e){var t=e.name,n=e.album,r=e.uri;return{id:r,image:c.toCustom(t,n.images),name:t,album:{id:n.uri,name:n.name,image:c.toCustom(n.name,n.images)},uri:r}}},{key:"toMusic",value:function(e){var t=e.id,n=e.name,r=e.album,a=e.uri;return{id:t,image:c.toCustom(n,r.images),name:n,album:{id:r.id,name:r.name,image:c.toCustom(r.name,r.images)},uri:a}}},{key:"toAlbum",value:function(e){var t=e.id,n=e.name,r=e.images;return{id:t,name:n,image:c.toCustom(n,r)}}}]),e}()},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(5),c=new(function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"alert",value:function(e){window.alert(e)}}]),e}())},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),a=n(5),c=n(74),i=(n(109),Object(c.initializeApp)({apiKey:"AIzaSyCM4LaAdvGSVav4WCVmtBf2ynJok6uMPGI",authDomain:"spotify-plugin-app.firebaseapp.com",databaseURL:"https://spotify-plugin-app.firebaseio.com",projectId:"spotify-plugin-app",storageBucket:"spotify-plugin-app.appspot.com",messagingSenderId:"1000088386798",appId:"1:1000088386798:web:de8232c75a287f4c9187ff",measurementId:"G-6DY82HL6BR"}).database()),u=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"addNew",value:function(e,t){try{i.ref(e).push().set(t)}catch(n){console.error("there was some firebase error",n)}}}]),e}()},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n.n(r),c=n(3),i=n(4),u=n(5),o=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"debounce",value:function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];null!=n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(void 0,a)}),t)}}},{key:"wait",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return P}));var r=n(1),a=n.n(r),c=n(3),i=n(10),u=n(0),o=n.n(u),s=n(20),l=n(27),p=n(25),f=n(4),d=n(5),v=n(13),m=[],h=function(){function e(){Object(f.a)(this,e)}return Object(d.a)(e,null,[{key:"stateToEvent",value:function(e){var t=null===e||void 0===e?void 0:e.track_window,n=t.current_track,r=t.next_tracks,a=t.previous_tracks,c=m[m.length-1],i=n.uri,u=v.a.PLAY_MUSIC;if(null==i)throw new Error("Invalid current track");if((null===e||void 0===e?void 0:e.position)<=1e3&&(u=v.a.RESTART_MUSIC),e.paused)u=v.a.PAUSE_MUSIC;else if(null!=c){var o=r.some((function(e){return e.uri===c}));a.some((function(e){return e.uri===c}))?u=v.a.CHANGE_TO_NEXT_MUSIC:o&&(u=v.a.CHANGE_TO_PREVIOUS_MUSIC)}return c!==i&&m.push(i),{type:u,value:i}}}]),e}(),O=n(8),_=n(41),b=n(6),E=n(17),y=Object(u.createContext)({}),T="".concat(O.a.getApiUrl(),"/me"),A=_.a.debounce((function(e,t){var n=h.stateToEvent(e);t(n.type,n.value)}),1e3);function S(e){var t=Object(b.b)(),n=t.accessToken,r=t.isAuthenticated,f=t.requestService,d=Object(E.b)().profile,m=Object(u.useState)(null),h=Object(i.a)(m,2),S=h[0],P=h[1],w=Object(u.useState)(!1),g=Object(i.a)(w,2),C=g[0],k=g[1],j=Object(u.useState)(null),I=Object(i.a)(j,2),R=I[0],x=I[1],L=Object(u.useState)(null),U=Object(i.a)(L,2),N=U[0],M=U[1],H=Object(u.useState)(),D=Object(i.a)(H,2),K=D[0],V=D[1],F=Object(v.c)().save;function Y(){return z.apply(this,arguments)}function z(){return(z=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S){e.next=5;break}return e.next=3,O.a.createPlayer(n);case 3:t=e.sent,P(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y();case 3:return e.next=5,q();case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),k(!0),l.a.alert("Tivemos um problema ao conectar ao spotify"),s.a.error("SPOTIFY_CONNECT_PROBLEM",e.t0,null===d||void 0===d?void 0:d.id);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function W(){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("".concat(T,"/player"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:n=e.sent,x((null!=(null===n||void 0===n?void 0:n.device)&&(null===S||void 0===S?void 0:S.device_id))===(null===n||void 0===n||null===(t=n.device)||void 0===t?void 0:t.id));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S){e.next=2;break}throw new Error("You have to login first!");case 2:return e.next=4,S.original.nextTrack();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S){e.next=2;break}throw new Error("You have to login first!");case 2:return e.next=4,S.original.previousTrack();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S){e.next=2;break}throw new Error("You have to login first!");case 2:return e.next=4,S.original.togglePlay();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(c.a)(a.a.mark((function e(){var t,n,r,c,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(T,"/player"),e.prev=1,e.next=4,f.put({url:t,data:{device_ids:[null===S||void 0===S?void 0:S.device_id]}});case 4:return e.next=6,_.a.wait(500);case 6:return e.next=8,q();case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),s.a.error("transferUserPlaybackToPlugin",e.t0),n=e.t0.response,r=n.data,((c=n.status)<200||c>299)&&("PREMIUM_REQUIRED"===(null===(i=r)||void 0===i||null===(u=i.error)||void 0===u?void 0:u.reason)?(l.a.alert("[USUARIO N\xc3O PREMIUM] Voc\xea precisa ser premium para conectar"),s.a.warn("[USUARIO N\xc3O PREMIUM] Voc\xea precisa ser premium para conectar",null===d||void 0===d?void 0:d.id)):(l.a.alert("Tivemos um problema ao conectar, tente novamente mais tarde"),s.a.warn("Tivemos um problema ao conectar, tente novamente mais tarde",null===d||void 0===d?void 0:d.id)));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){r&&function(){G.apply(this,arguments)}()}),[n,r]),Object(u.useEffect)((function(){M(null!=S),null!=S&&S.original.addListener("player_state_changed",(function(e){if(null==e)x(!1),l.a.alert("Voc\xea foi desconectado!");else{var t=e.position,n=e.duration,r=e.paused,a=e.track_window.current_track;A(e,F),V({currentTrack:p.a.toMusicTrack(a),duration:n,position:t,paused:r})}}))}),[S]),o.a.createElement(y.Provider,Object.assign({value:{isPlayerReady:N,isPluginPlayerActive:R,nextTrack:function(){return X.apply(this,arguments)},playerHasError:C,playingMusicInfo:K,previousTrack:function(){return J.apply(this,arguments)},togglePlay:function(){return Q.apply(this,arguments)},transferUserPlaybackToPlugin:function(){return $.apply(this,arguments)}}},e))}var P=function(){return Object(u.useContext)(y)}},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(87);var r=n(0),a=n.n(r);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createElement("title",null,"Audio Wave"),o=a.a.createElement("path",{className:"wave-svg-line-1","data-name":"Line 1",d:"M0.91,15L0.78,15A1,1,0,0,0,0,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H0.91Z"}),s=a.a.createElement("path",{className:"wave-svg-line-2","data-name":"Line 2",d:"M6.91,9L6.78,9A1,1,0,0,0,6,10V28a1,1,0,1,0,2,0s0,0,0,0V10A1,1,0,0,0,7,9H6.91Z"}),l=a.a.createElement("path",{className:"wave-svg-line-3","data-name":"Line 3",d:"M12.91,0L12.78,0A1,1,0,0,0,12,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H12.91Z"}),p=a.a.createElement("path",{className:"wave-svg-line-4","data-name":"Line 4",d:"M18.91,10l-0.12,0A1,1,0,0,0,18,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H18.91Z"}),f=a.a.createElement("path",{className:"wave-svg-line-5","data-name":"Line 5",d:"M24.91,15l-0.12,0A1,1,0,0,0,24,16v6a1,1,0,0,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H24.91Z"}),d=a.a.createElement("path",{className:"wave-svg-line-6","data-name":"Line 6",d:"M30.91,10l-0.12,0A1,1,0,0,0,30,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H30.91Z"}),v=a.a.createElement("path",{className:"wave-svg-line-7","data-name":"Line 7",d:"M36.91,0L36.78,0A1,1,0,0,0,36,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H36.91Z"}),m=a.a.createElement("path",{className:"wave-svg-line-8","data-name":"Line 8",d:"M42.91,9L42.78,9A1,1,0,0,0,42,10V28a1,1,0,1,0,2,0s0,0,0,0V10a1,1,0,0,0-1-1H42.91Z"}),h=a.a.createElement("path",{className:"wave-svg-line-9","data-name":"Line 9",d:"M48.91,15l-0.12,0A1,1,0,0,0,48,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H48.91Z"}),O=function(e){var t=e.svgRef,n=e.title,r=i(e,["svgRef","title"]);return a.a.createElement("svg",c({className:"wave-svg","data-name":"Layer 1",viewBox:"0 0 50 38.05",ref:t},r),void 0===n?u:n?a.a.createElement("title",null,n):null,o,s,l,p,f,d,v,m,h)},_=a.a.forwardRef((function(e,t){return a.a.createElement(O,c({svgRef:t},e))}));n.p;function b(){return a.a.createElement("div",{className:"loader-component"},a.a.createElement(_,null))}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m}));var r=n(1),a=n.n(r),c=n(3),i=n(0),u=n.n(i),o=n(19),s=n(15),l="true"===Object({NODE_ENV:"production",PUBLIC_URL:"/computer-science-tcc",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_COOKIE_NAME:"SpotifyToken",REACT_APP_HOST_URL:"https://ericoloewe.github.io/computer-science-tcc",REACT_APP_LORS_HOST:"https://lors.azurewebsites.net",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1",REACT_APP_SPOTIFY_AUTH_URL:"https://accounts.spotify.com/authorize",REACT_APP_SPOTIFY_CLIENT_ID:"62cd1002f7cd431e92969df2d619de90",REACT_APP_SPOTIFY_CLIENT_SECRET:"2ba7386c1c7a447fb961f4de8d091009",REACT_APP_USE_GTM:"true"}).REACT_APP_USE_API_TO_LOAD_FEELINGS,p=Object({NODE_ENV:"production",PUBLIC_URL:"/computer-science-tcc",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_COOKIE_NAME:"SpotifyToken",REACT_APP_HOST_URL:"https://ericoloewe.github.io/computer-science-tcc",REACT_APP_LORS_HOST:"https://lors.azurewebsites.net",REACT_APP_SPOTIFY_API_URL:"https://api.spotify.com/v1",REACT_APP_SPOTIFY_AUTH_URL:"https://accounts.spotify.com/authorize",REACT_APP_SPOTIFY_CLIENT_ID:"62cd1002f7cd431e92969df2d619de90",REACT_APP_SPOTIFY_CLIENT_SECRET:"2ba7386c1c7a447fb961f4de8d091009",REACT_APP_USE_GTM:"true"}).REACT_APP_API_HOST||"https://localhost:44301/api",f="https://ericoloewe.github.io/computer-science-tcc",d=Object(i.createContext)({});function v(e){function t(){return(t=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l?m("activities",t):i("activities.json",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l?m("feeling",t):i("feelings.json",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l?m("locations",t):i("locations.json",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.get("".concat(f,"/").concat(t));case 2:return r=e.sent,c=r.data,e.abrupt("return",c.filter((function(e){return!n||e.toLowerCase().includes(null===n||void 0===n?void 0:n.toLowerCase())})).map((function(e){return{id:s.a.toKebabCase(e),name:e}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.get({url:"".concat(p,"/").concat(t),params:{text:n}});case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.a.createElement(d.Provider,Object.assign({value:{searchActivity:function(e){return t.apply(this,arguments)},searchFeeling:function(e){return n.apply(this,arguments)},searchLocation:function(e){return r.apply(this,arguments)}}},e))}var m=function(){return Object(i.useContext)(d)}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return O}));var r=n(1),a=n.n(r),c=n(3),i=n(0),u=n.n(i),o=n(4),s=n(5),l=n(25),p=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"toArtist",value:function(e){var t,n=e.uri,r=e.name;return{id:n,name:r,image:{alt:r,src:null===(t=e.images[0])||void 0===t?void 0:t.url}}}},{key:"toMusic",value:function(e){return l.a.toMusic(e)}}]),e}(),f=n(8),d=n(6),v=Object(i.createContext)({}),m="".concat(f.a.getApiUrl(),"/search");function h(e){var t=Object(d.b)().requestService;function n(e,t){return r.apply(this,arguments)}function r(){return(r=Object(c.a)(a.a.mark((function e(n,r){var c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({url:m,params:{q:n,type:r}});case 2:return c=e.sent,i=c.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(t){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"artist");case 2:if(r=e.sent,c=r.artists){e.next=6;break}throw new Error("Invalid response");case 6:return e.abrupt("return",c.items.map(p.toArtist));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function e(t){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,"track");case 2:if(r=e.sent,c=r.tracks){e.next=6;break}throw new Error("Invalid response");case 6:return e.abrupt("return",c.items.map(p.toMusic));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.a.createElement(v.Provider,Object.assign({value:{searchArtists:function(e){return i.apply(this,arguments)},searchMusic:function(e){return o.apply(this,arguments)}}},e))}var O=function(){return Object(i.useContext)(v)}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(10),a=n(0),c=n.n(a),i=n(23),u=n(8),o=n(15),s=n(19),l=Object(a.createContext)({isAuthenticated:!1});function p(e){var t=Object(a.useState)(i.a.get("SpotifyToken")),n=Object(r.a)(t,2),p=n[0],f=n[1],d=Object(a.useState)(new s.a(p)),v=Object(r.a)(d,2),m=v[0],h=v[1],O=Object(a.useState)(!1),_=Object(r.a)(O,2),b=_[0],E=_[1];return Object(a.useEffect)((function(){E(!o.a.isEmpty(p)),h(new s.a(p))}),[p]),c.a.createElement(l.Provider,Object.assign({value:{logout:function(){if(f(null),i.a.delete("SpotifyToken"),window.confirm("Deseja sair do Spotify?")){var e=window.open("https://www.spotify.com/logout/","Spotify Logout","width=700,height=500,top=40,left=40");setTimeout((function(){return null===e||void 0===e?void 0:e.close()}),5e3)}},saveToken:function(e){var t=u.a.getTokenAndInfoFromRedirectUrl(e),n=t.accessToken,r=t.expiresInSeconds;i.a.save("SpotifyToken",n,r),f(n)},isAuthenticated:b,accessToken:p,requestService:m}},e))}var f=function(){return c.a.useContext(l)}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n.n(r),c=n(4),i=n(5),u=n(3);function o(){return(o=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=document.createElement("script");n.src="https://sdk.scdn.co/spotify-player.js",n.charset="utf-8",n.async=!0,n.onload=function(){return e()},n.onerror=function(){return t()},document.body.appendChild(n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"createSpotifyAuthUrl",value:function(){var t=new URL("https://accounts.spotify.com/authorize");return t.searchParams.set("client_id","62cd1002f7cd431e92969df2d619de90"),t.searchParams.set("response_type","token"),t.searchParams.set("redirect_uri",e.getSpotifyRedirectUrl()),t.searchParams.set("scope",this.SCOPES.join(" ")),t.toString()}},{key:"createPlayer",value:function(e){return new Promise((function(t,n){window.onSpotifyWebPlaybackSDKReady=function(){var r=new Spotify.Player({name:"Spotify plugin",getOAuthToken:function(t){t(e)}});r.addListener("initialization_error",(function(e){var t=e.message;return n(t)})),r.addListener("authentication_error",(function(e){var t=e.message;return n(t)})),r.addListener("account_error",(function(e){var t=e.message;return n(t)})),r.addListener("playback_error",(function(e){var t=e.message;return n(t)})),r.addListener("not_ready",(function(e){var t=e.device_id;return n("Device ID has gone offline ".concat(t))})),r.addListener("ready",(function(e){var n=e.device_id;return t({device_id:n,original:r})})),r.connect()},function(){return o.apply(this,arguments)}().catch(n)}))}},{key:"getApiUrl",value:function(){return"https://api.spotify.com/v1"}},{key:"getTokenAndInfoFromRedirectUrl",value:function(e){var t=new URL(e);t.search=t.hash.slice(2,t.hash.length);var n=t.searchParams.get("access_token"),r=Number(t.searchParams.get("expires_in")),a=t.searchParams.get("token_type");if(!n||!r||!a)throw new Error("Invalid redirect parameter");return{accessToken:n,expiresInSeconds:r,tokenType:a}}},{key:"getSpotifyRedirectUrl",value:function(){var e=new URL("https://ericoloewe.github.io/computer-science-tcc");return e.hash="/login-redirect-spotify",e.toString()}}]),e}();s.SCOPES=["playlist-modify-private","playlist-modify-public","playlist-read-private","streaming","user-library-read","user-read-email","user-read-playback-state","user-read-private","user-read-recently-played","user-top-read"]},81:function(e,t,n){e.exports=n(111)},86:function(e,t,n){},87:function(e,t,n){}},[[81,4,5]]]);
//# sourceMappingURL=main.f5b5e873.chunk.js.map